<VirtualHost *:80>
    ServerName <%= @params[:server_name] %>
    ServerAlias www.<%= @params[:server_name] %>
    ServerAdmin <%= node[:apache][:contact] %>

    ProxyRequests Off

    <Location />
        ProxyPass "http://localhost:3000/"
        ProxyPassReverse "http://localhost:3000/"
    </Location>

    ProxyPreserveHost On

    <Proxy *>
    Require all granted
    </Proxy>

    ErrorLog <%= node['apache']['log_dir'] %>/<%= @params[:server_name] %>-error.log
    CustomLog <%= node['apache']['log_dir'] %>/<%= @params[:server_name] %>-access.log combined

    Header always set X-XSS-Protection "1; mode=block"
    Header always set X-Content-Type-Options nosniff
</VirtualHost>
